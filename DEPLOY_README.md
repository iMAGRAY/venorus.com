# üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π–º–µ–Ω—Çt Venorus

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –¥–µ–ø–ª–æ–π–º–µ–Ω—Ça –ø—Ä–∏ push –≤ main –≤–µ—Ç–∫—É:

### üîß –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã:

1. **Webhook endpoint**: `/api/webhook/github`
2. **–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è**: `scripts/deploy/auto-deploy.js`
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: `/api/deploy/status`
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: `logs/deploy.log`

### üìã –ë—ã—Å—Ç—Ä–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

#### 1. –í GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:
```
Settings ‚Üí Webhooks ‚Üí Add webhook
‚Ä¢ Payload URL: https://your-domain.com/api/webhook/github
‚Ä¢ Content type: application/json
‚Ä¢ Secret: venorus_webhook_secret_2025
‚Ä¢ Events: Just the push event
```

#### 2. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É–±–µ–¥–∏—Ç–µ—Å—å:
```bash
# Webhook secret —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
echo $GITHUB_WEBHOOK_SECRET

# –ü—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ git –∫–æ–º–∞–Ω–¥
git fetch origin

# PM2 –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
pm2 list
```

### üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **Push –≤ main** ‚Üí GitHub –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç webhook
2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** ‚Üí HMAC –ø–æ–¥–ø–∏—Å—å –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç—Å—è
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π–º–µ–Ω—Çt**:
   ```bash
   git fetch origin
   git reset --hard origin/main
   npm ci
   npm run build
   pm2 restart venorus  # –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
   ```
4. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Üí –í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `logs/deploy.log`

### üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å webhook:**
```bash
curl https://your-domain.com/api/webhook/github
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –¥–µ–ø–ª–æ–π–º–µ–Ω—Ça:**
```bash
curl https://your-domain.com/api/deploy/status
```

**–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏:**
```bash
tail -f logs/deploy.log
```

### üõ†Ô∏è –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π–º–µ–Ω—Çt

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π
npm run deploy:auto

# –†—É—á–Ω–æ–π
npm run deploy:manual

# –û—á–∏—Å—Ç–∫–∞ –∫–µ—à–∞
npm run clean
```

### üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ HMAC SHA256 –ø–æ–¥–ø–∏—Å—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è
- ‚úÖ –¢–æ–ª—å–∫–æ main/master –≤–µ—Ç–∫–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è  
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è

### üö® –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

**Webhook –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å endpoint
curl -X GET https://your-domain.com/api/webhook/github

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ–∫—Ä–µ—Ç
echo $GITHUB_WEBHOOK_SECRET
```

**–î–µ–ø–ª–æ–π–º–µ–Ω—Çt –ø–∞–¥–∞–µ—Ç:**
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
cat logs/deploy.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ git
git status
git pull origin main
```

### üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub webhook** –ø–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤—ã—à–µ
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ** —Å–¥–µ–ª–∞–≤ test commit –≤ main
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ** –ª–æ–≥–∏ –ø–µ—Ä–≤—ã—Ö –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–æ–≤
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ PM2** –µ—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

---

## üîÑ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```bash
# –î–µ–ª–∞–µ—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
git add .
git commit -m "Update feature X"
git push origin main

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:
# 1. GitHub –æ—Ç–ø—Ä–∞–≤–∏—Ç webhook
# 2. –°–µ—Ä–≤–µ—Ä –ø–æ–ª—É—á–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
# 3. –ö–æ–¥ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
# 4. –°–∞–π—Ç –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω —Å –Ω–æ–≤—ã–º–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
```

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ**